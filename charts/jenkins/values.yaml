# Jenkins Chart Values
# Uses global configuration from values-global.yaml
# Image, plugins, admin credentials, and replica count are inherited from global.applications.jenkins

service:
  type: ClusterIP
  port: 8080
  agentPort: 50000

# Storage configuration - uses global.storage.storageClass and global.storage.sizes.large
persistence:
  enabled: true

# Resources - uses global.resources.xlarge
# Override only if needed for specific requirements

# Jenkins Configuration as Code (JCasC)
casc:
  enabled: true
  config: |
    jenkins:
      systemMessage: "Jenkins configured automatically by JCasC"
      numExecutors: 2
      mode: NORMAL
      scmCheckoutRetryCount: 3
      
      securityRealm:
        local:
          allowsSignup: false
          users:
            - id: "admin"
              password: "admin"
      
      authorizationStrategy:
        loggedInUsersCanDoAnything:
          allowAnonymousRead: false
      
      # Configure CSRF protection for proxy compatibility
      crumbIssuer:
        standard:
          excludeClientIPFromCrumb: true
      
      # Disable security for easier access (development only)
      disabledAdministrativeMonitors:
        - "hudson.diagnosis.ReverseProxySetupMonitor"
    
    security:
      # Enable proxy compatibility
      apiToken:
        creationOfLegacyTokenEnabled: false
        tokenGenerationOnCreationEnabled: false
        usageStatisticsEnabled: true
    
    unclassified:
      location:
        url: "http://localhost:8000/jenkins"
      
      # Configure for reverse proxy
      globalLibraries:
        libraries: []

# Plugins configuration inherited from global.applications.jenkins.plugins
# Override only if needed for specific requirements

# Jenkins Jobs Configuration
jobs:
  enabled: true
  # Jobs will be loaded from charts/jenkins/jobs/ directory
  # Each XML file represents a Jenkins job configuration

