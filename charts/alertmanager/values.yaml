# AlertManager Chart Values
# Uses global configuration from values-global.yaml
# Image and replica count are inherited from global.applications.alertmanager

service:
  type: ClusterIP
  port: 9093

# Storage configuration - uses global.storage.storageClass and global.storage.sizes.small
persistence:
  enabled: true

# Resources - uses global.resources.small
# Override only if needed for specific requirements

# AlertManager configuration
config:
  global:
    resolve_timeout: 5m
  
  route:
    group_by: ['alertname', 'cluster', 'service']
    group_wait: 10s
    group_interval: 10s
    repeat_interval: 12h
    receiver: 'default'
    routes:
      - match:
          severity: critical
        receiver: 'critical'
        continue: true
      - match:
          severity: warning
        receiver: 'warning'
  
  receivers:
    - name: 'default'
      webhook_configs:
        - url: 'http://localhost:5001/webhook'
          send_resolved: true
    
    - name: 'critical'
      webhook_configs:
        - url: 'http://localhost:5001/webhook/critical'
          send_resolved: true
    
    - name: 'warning'
      webhook_configs:
        - url: 'http://localhost:5001/webhook/warning'
          send_resolved: true

  inhibit_rules:
    - source_match:
        severity: 'critical'
      target_match:
        severity: 'warning'
      equal: ['alertname', 'cluster', 'service']
