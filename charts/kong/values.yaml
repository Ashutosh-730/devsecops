# Kong Chart Values
# Uses global configuration from values-global.yaml
# Image, replica count, and postgres credentials are inherited from global.applications.kong

proxy:
  type: ClusterIP
  httpPort: 8000
  httpsPort: 8443

admin:
  enabled: true
  type: ClusterIP
  port: 8001

manager:
  enabled: true
  type: ClusterIP
  port: 8002

# Environment configuration (service-specific)
env:
  database: "postgres"
  pg_host: "kong-postgres"
  pg_port: "5432"
  proxy_access_log: /dev/stdout
  admin_access_log: /dev/stdout
  proxy_error_log: /dev/stderr
  admin_error_log: /dev/stderr
  admin_listen: "0.0.0.0:8001, 0.0.0.0:8444 ssl"
  admin_gui_listen: "0.0.0.0:8002"
  admin_gui_url: "http://localhost:8000/kongui"
  admin_api_uri: "http://localhost:8001"
  admin_gui_access_log: /dev/stdout
  admin_gui_error_log: /dev/stderr
  admin_gui_api_url: "http://localhost:8001"
  admin_gui_path: "/kongui"
  enforce_rbac: "on"
  admin_gui_auth: "basic-auth"
  admin_gui_session_conf: '{"secret":"kong","storage":"kong","cookie_secure":false}'
  password: "kong"

# Prometheus plugin configuration
plugins:
  prometheus:
    enabled: true
    config:
      per_consumer: true
      status_code_metrics: true
      latency_metrics: true
      bandwidth_metrics: true
      upstream_health_metrics: true

declarativeConfig:
  enabled: false

# PostgreSQL configuration
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "13"
  port: 5432
  persistence:
    enabled: false
